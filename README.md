

## Markowitz Mean-Variance Optimization

### Overview

This project implements a Markowitz mean-variance portfolio optimization pipeline in MATLAB, using real-world daily prices of ~90 stocks in the S&P 100 for the years 2013-2019.

The input datasets are generated by a companion Python script:
- **`prices.csv`** - daily adjusted stock prices (downloaded from Yahoo Finance via `yfinance`)
- **`ff3.csv`** - Fama-French 3-factor dataset (downloaded from Kenneth French’s data library via `pandas_datareader`)

These files are created by running `fetch_data.py`, after which the MATLAB pipeline takes over to estimate expected returns via FF3 regressions and construct the efficient frontier, Global Minimum Variance (GMV) portfolio, and Tangency portfolio.

For the mathematical formulation, see [math.pdf](math.pdf).

### Usage

Tested on Python 3.12.2 / MATLAB R2024b

Requirements:

- Python: `pandas`, `pandas_datareader`, `yfinance`
- MATLAB: `Statistics and Machine Learning Toolbox`

Workflow:

- Run `fetch_data.py`
- Run `optimization.m`

Running the two scripts should reproduce all tables and figures in `outputs/`.


### Outputs
All outputs are saved inside `outputs/`:

#### Tables (`outputs/tables/`)
- **`ff3_regression_table.csv`** – regression results (alpha, betas for FF3 factors, and R2)
- **`mu.csv`** – annualized expected returns for each asset
- **`weights_gmv.csv`** – GMV portfolio weights
- **`weights_tangency.csv`** – Tangency portfolio weights
- **`frontier_points.csv`** – ($\sigma$, $\mu$) points along the efficient frontier (annual)
- **`cml_points.csv`** – ($\sigma$, $\mu$) points along the Capital Market Line (annual)

#### Figures (`outputs/figures/`)
- **`1_frontier.png`** – Efficient frontier (closed form)
- **`2_frontier_assets.png`** – Frontier compared with individual assets
- **`3_frontier_riskfree.png`** – Frontier + CML with GMV and Tangency
- **`4_frontier_riskfree_assets.png`** – Frontier + CML with assets
- **`5_gmvp_composition.png`** – GMV portfolio composition (long/short weights)
- **`6_tangency_composition.png`** – Tangency portfolio composition (long/short weights)


### Changelog

- **v1.0 (current)** - Initial release
  - Automated data collection and import
  - FF3 expected returns (with optional alpha)
  - Efficient frontier (closed form), GMV portfolio
  - Tangency portfolio, Capital Market Line
  - Plots + CSV exports

- **v1.1 (WIP)** - Robustness improvements and portfolio constraints
  - Ridge regression option for factor betas (numerical stability)
  - Long-only constraints via `quadprog`
  - Python script improvements (error handling, retries/backoff for downloads)

- **v1.2 (planned)** - Backtesting and diagnostics
  - IS/OOS evaluation
  - Turnover and drawdown metrics
